{"ast":null,"code":"import _regeneratorRuntime from\"D:/Website/Note/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Website/Note/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Website/Note/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import ListNote from\"../components/ListNote\";import AddButton from\"../components/AddButton\";import'../styles/NoteListPage.css';import Pagination from'../components/PageNumber';import API from'../ultis/API';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TasksListPage=function TasksListPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),totalPage=_useState6[0],setTotalPage=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),noteCount=_useState8[0],setNoteCount=_useState8[1];useEffect(function(){getPageList();},[page]);var handlePageChange=function handlePageChange(newPage){setPage(newPage);};var getPageList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.get(\"notes/?page=\".concat(page));case 3:resp=_context.sent;setNotes(resp.data.results);setTotalPage(resp.data.total_pages);setNoteCount(resp.data.count);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log('PAGINATION ERROR>>>',_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function getPageList(){return _ref.apply(this,arguments);};}();var searchNotes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(value){var resp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return API.get(\"notes/?search=\".concat(value));case 3:resp=_context2.sent;console.log('SEARCH RESPONSE',resp.data);setNotes(resp.data.results);setTotalPage(resp.data.total_pages);setNoteCount(resp.data.count);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log('SEARCH ERROR:',_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function searchNotes(_x){return _ref2.apply(this,arguments);};}();var handleSearchInputchange=function handleSearchInputchange(e){e.preventDefault();searchNotes(e.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"notes\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"notes-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"notes-title\",children:\"\\u2636 NOTES\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notes-count\",children:noteCount})]}),/*#__PURE__*/_jsx(\"div\",{id:\"search-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",onChange:handleSearchInputchange})}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-list\",children:notes.map(function(note){return/*#__PURE__*/_jsx(ListNote,{note:note},note.id);})}),/*#__PURE__*/_jsx(Pagination,{totalPage:totalPage,page:page,handlePageChange:handlePageChange}),/*#__PURE__*/_jsx(AddButton,{})]});};export default TasksListPage;","map":{"version":3,"names":["React","useState","useEffect","ListNote","AddButton","Pagination","API","TasksListPage","notes","setNotes","page","setPage","totalPage","setTotalPage","noteCount","setNoteCount","getPageList","handlePageChange","newPage","get","resp","data","results","total_pages","count","console","log","searchNotes","value","handleSearchInputchange","e","preventDefault","target","map","note","id"],"sources":["D:/Website/Note/frontend/src/pages/NoteListPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ListNote from \"../components/ListNote\";\r\nimport AddButton from \"../components/AddButton\";\r\nimport '../styles/NoteListPage.css'\r\nimport Pagination from '../components/PageNumber'\r\nimport API from '../ultis/API'\r\n\r\n\r\nconst TasksListPage = () => {\r\n  const [notes, setNotes] = useState([]);\r\n  const [page, setPage] = useState(1)\r\n  const [totalPage, setTotalPage]= useState(null)\r\n  const [noteCount, setNoteCount] = useState(null)\r\n\r\n\r\n  useEffect(() => {\r\n    getPageList();\r\n  }, [page]);\r\n\r\n  \r\n  let handlePageChange = (newPage)=>{\r\n    setPage(newPage)\r\n  }\r\n  \r\n  let getPageList = async () => {\r\n    try{\r\n        let resp = await API.get(`notes/?page=${page}`);\r\n        setNotes(resp.data.results)\r\n        setTotalPage(resp.data.total_pages)\r\n        setNoteCount(resp.data.count)\r\n    }catch(error){\r\n        console.log('PAGINATION ERROR>>>', error)\r\n    }  \r\n  };\r\n\r\n  let searchNotes = async(value)=>{\r\n    try{\r\n      let resp = await API.get(`notes/?search=${value}`)\r\n      console.log('SEARCH RESPONSE', resp.data)\r\n      setNotes(resp.data.results)\r\n      setTotalPage(resp.data.total_pages)\r\n      setNoteCount(resp.data.count)\r\n    }catch(error){\r\n      console.log('SEARCH ERROR:',error)\r\n    }\r\n  }\r\n\r\n  let handleSearchInputchange = (e)=>{\r\n    e.preventDefault()\r\n    searchNotes(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <div className=\"notes\">\r\n      <div className=\"notes-header\">\r\n        <h2 className=\"notes-title\">&#9782; NOTES</h2>\r\n        <p className=\"notes-count\">{noteCount}</p>\r\n      </div>\r\n      <div id=\"search-input\">\r\n        <input  type=\"text\" placeholder=\"Search\" onChange={handleSearchInputchange}/>\r\n      </div>\r\n      <div className=\"notes-list\">\r\n        {notes.map((note) => (\r\n          <ListNote key={note.id} note={note} />\r\n        ))}\r\n      </div>\r\n\r\n      <Pagination\r\n        totalPage={totalPage}\r\n        page={page}\r\n        handlePageChange={handlePageChange}\r\n      />\r\n      <AddButton />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TasksListPage;"],"mappings":"0VAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,SAAP,KAAqB,wBAArB,CACA,MAAOC,UAAP,KAAsB,yBAAtB,CACA,MAAO,4BAAP,CACA,MAAOC,WAAP,KAAuB,0BAAvB,CACA,MAAOC,IAAP,KAAgB,cAAhB,C,wFAGA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAAwBR,QAAQ,CAAC,CAAD,CAAhC,yCAAOS,IAAP,eAAaC,OAAb,eACA,eAAiCV,QAAQ,CAAC,IAAD,CAAzC,yCAAOW,SAAP,eAAkBC,YAAlB,eACA,eAAkCZ,QAAQ,CAAC,IAAD,CAA1C,yCAAOa,SAAP,eAAkBC,YAAlB,eAGAb,SAAS,CAAC,UAAM,CACdc,WAAW,GACZ,CAFQ,CAEN,CAACN,IAAD,CAFM,CAAT,CAKA,GAAIO,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,OAAD,CAAW,CAChCP,OAAO,CAACO,OAAD,CAAP,CACD,CAFD,CAIA,GAAIF,YAAW,4FAAG,oLAEKV,IAAG,CAACa,GAAJ,uBAAuBT,IAAvB,EAFL,QAERU,IAFQ,eAGZX,QAAQ,CAACW,IAAI,CAACC,IAAL,CAAUC,OAAX,CAAR,CACAT,YAAY,CAACO,IAAI,CAACC,IAAL,CAAUE,WAAX,CAAZ,CACAR,YAAY,CAACK,IAAI,CAACC,IAAL,CAAUG,KAAX,CAAZ,CALY,+EAOZC,OAAO,CAACC,GAAR,CAAY,qBAAZ,cAPY,oEAAH,kBAAXV,YAAW,0CAAf,CAWA,GAAIW,YAAW,6FAAG,kBAAMC,KAAN,yKAEGtB,IAAG,CAACa,GAAJ,yBAAyBS,KAAzB,EAFH,QAEVR,IAFU,gBAGdK,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BN,IAAI,CAACC,IAApC,EACAZ,QAAQ,CAACW,IAAI,CAACC,IAAL,CAAUC,OAAX,CAAR,CACAT,YAAY,CAACO,IAAI,CAACC,IAAL,CAAUE,WAAX,CAAZ,CACAR,YAAY,CAACK,IAAI,CAACC,IAAL,CAAUG,KAAX,CAAZ,CANc,qFAQdC,OAAO,CAACC,GAAR,CAAY,eAAZ,eARc,uEAAH,kBAAXC,YAAW,6CAAf,CAYA,GAAIE,wBAAuB,CAAG,QAA1BA,wBAA0B,CAACC,CAAD,CAAK,CACjCA,CAAC,CAACC,cAAF,GACAJ,WAAW,CAACG,CAAC,CAACE,MAAF,CAASJ,KAAV,CAAX,CACD,CAHD,CAKA,mBACE,aAAK,SAAS,CAAC,OAAf,wBACE,aAAK,SAAS,CAAC,cAAf,wBACE,WAAI,SAAS,CAAC,aAAd,0BADF,cAEE,UAAG,SAAS,CAAC,aAAb,UAA4Bd,SAA5B,EAFF,GADF,cAKE,YAAK,EAAE,CAAC,cAAR,uBACE,cAAQ,IAAI,CAAC,MAAb,CAAoB,WAAW,CAAC,QAAhC,CAAyC,QAAQ,CAAEe,uBAAnD,EADF,EALF,cAQE,YAAK,SAAS,CAAC,YAAf,UACGrB,KAAK,CAACyB,GAAN,CAAU,SAACC,IAAD,qBACT,KAAC,QAAD,EAAwB,IAAI,CAAEA,IAA9B,EAAeA,IAAI,CAACC,EAApB,CADS,EAAV,CADH,EARF,cAcE,KAAC,UAAD,EACE,SAAS,CAAEvB,SADb,CAEE,IAAI,CAAEF,IAFR,CAGE,gBAAgB,CAAEO,gBAHpB,EAdF,cAmBE,KAAC,SAAD,IAnBF,GADF,CAuBD,CAnED,CAqEA,cAAeV,cAAf"},"metadata":{},"sourceType":"module"}