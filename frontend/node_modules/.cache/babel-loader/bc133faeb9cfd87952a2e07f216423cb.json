{"ast":null,"code":"import _objectSpread from\"D:/Website/Note/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Website/Note/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Website/Note/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Website/Note/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{ReactComponent as LeftArrow}from\"../assets/LeftArrow.svg\";import AuthContext from'../context/AuthContext';import API from'../ultis/API';import'../styles/NotePage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var _useParams=useParams(),noteID=_useParams.noteID;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;var history=useNavigate();useEffect(function(){getNote();},[]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteID===\"new\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return API.get(\"note/\".concat(noteID,\"/\"));case 5:resp=_context.sent;setNote(resp.data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function getNote(){return _ref.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.put(\"note/\".concat(noteID,\"/\"),{user:note.user,body:note.body});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function updateNote(){return _ref2.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return API.delete(\"note/\".concat(noteID,\"/\"));case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteNote(){return _ref3.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return API.post(\"notes/\",{user:user.user_id,body:note.body});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function createNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteID!==\"new\"&&note.body!==\"\"){updateNote();}else if(noteID!==\"new\"&&note.body===\"\"){deleteNote();}else if(noteID===\"new\"&&note.body!==null){createNote();}history(\"/\");};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{body:value});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"note-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(LeftArrow,{onClick:handleSubmit})})}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","ReactComponent","LeftArrow","AuthContext","API","NotePage","noteID","note","setNote","user","history","getNote","get","resp","data","console","log","updateNote","put","body","deleteNote","delete","createNote","post","user_id","handleSubmit","handleChange","value","e","target"],"sources":["D:/Website/Note/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { ReactComponent as LeftArrow } from \"../assets/LeftArrow.svg\";\r\nimport AuthContext from '../context/AuthContext'\r\nimport API from '../ultis/API'\r\nimport '../styles/NotePage.css'\r\nconst NotePage = () => {\r\n  const { noteID } = useParams();\r\n  const [note, setNote] = useState(null);\r\n  const {user} = useContext(AuthContext)\r\n  const history = useNavigate();\r\n  useEffect(() => {\r\n    getNote();\r\n  }, []);\r\n\r\n  let getNote = async () => {\r\n    if (noteID === \"new\") return;\r\n    try{\r\n      let resp = await API.get(`note/${noteID}/`)\r\n      setNote(resp.data)\r\n    }catch(error){\r\n      console.log(error)\r\n    }\r\n  };\r\n\r\n  const updateNote = async () => {\r\n    await API.put(`note/${noteID}/`,{\r\n      user:note.user,\r\n      body:note.body\r\n    })\r\n  };\r\n\r\n  const deleteNote = async () => {\r\n    await API.delete(`note/${noteID}/`)\r\n\r\n  };\r\n\r\n  const createNote = async ()=>{\r\n    await API.post(`notes/`,{\r\n      user:user.user_id,\r\n      body:note.body\r\n    })\r\n  }\r\n  const handleSubmit = () => {\r\n    if (noteID !== \"new\" && note.body !== \"\") {\r\n      updateNote();\r\n    } else if (noteID !== \"new\" && note.body === \"\") {\r\n      deleteNote();\r\n    } else if (noteID === \"new\" && note.body !== null) {\r\n      createNote();\r\n    }\r\n    history(`/`);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setNote((note) => ({ ...note, body: value }));\r\n    \r\n  };\r\n  return (\r\n    <div className=\"note\">\r\n      <div className=\"note-header\">\r\n        <h3>\r\n          <LeftArrow onClick={handleSubmit} />\r\n        </h3>\r\n        {/* {noteID !== \"new\" ? (\r\n          <button onClick={deleteTask}>Delete</button>\r\n        ) : (\r\n          <button onClick={handleSubmit}>Done</button>\r\n        )} */}\r\n      </div>\r\n      <textarea\r\n        onChange={(e) => {\r\n          handleChange(e.target.value);\r\n        }}\r\n        value={note?.body}\r\n      ></textarea>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotePage;"],"mappings":"ucAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,kBAAvC,CACA,OAASC,cAAc,GAAIC,UAA3B,KAA4C,yBAA5C,CACA,MAAOC,YAAP,KAAwB,wBAAxB,CACA,MAAOC,IAAP,KAAgB,cAAhB,CACA,MAAO,wBAAP,C,wFACA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACrB,eAAmBN,SAAS,EAA5B,CAAQO,MAAR,YAAQA,MAAR,CACA,cAAwBV,QAAQ,CAAC,IAAD,CAAhC,wCAAOW,IAAP,eAAaC,OAAb,eACA,gBAAeV,UAAU,CAACK,WAAD,CAAzB,CAAOM,IAAP,aAAOA,IAAP,CACA,GAAMC,QAAO,CAAGV,WAAW,EAA3B,CACAH,SAAS,CAAC,UAAM,CACdc,OAAO,GACR,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAIA,QAAO,4FAAG,mJACRL,MAAM,GAAK,KADH,wGAGOF,IAAG,CAACQ,GAAJ,gBAAgBN,MAAhB,MAHP,QAGNO,IAHM,eAIVL,OAAO,CAACK,IAAI,CAACC,IAAN,CAAP,CAJU,+EAMVC,OAAO,CAACC,GAAR,cANU,oEAAH,kBAAPL,QAAO,0CAAX,CAUA,GAAMM,WAAU,6FAAG,iKACXb,IAAG,CAACc,GAAJ,gBAAgBZ,MAAhB,MAA0B,CAC9BG,IAAI,CAACF,IAAI,CAACE,IADoB,CAE9BU,IAAI,CAACZ,IAAI,CAACY,IAFoB,CAA1B,CADW,yDAAH,kBAAVF,WAAU,2CAAhB,CAOA,GAAMG,WAAU,6FAAG,iKACXhB,IAAG,CAACiB,MAAJ,gBAAmBf,MAAnB,MADW,yDAAH,kBAAVc,WAAU,2CAAhB,CAKA,GAAME,WAAU,6FAAG,iKACXlB,IAAG,CAACmB,IAAJ,UAAkB,CACtBd,IAAI,CAACA,IAAI,CAACe,OADY,CAEtBL,IAAI,CAACZ,IAAI,CAACY,IAFY,CAAlB,CADW,yDAAH,kBAAVG,WAAU,2CAAhB,CAMA,GAAMG,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzB,GAAInB,MAAM,GAAK,KAAX,EAAoBC,IAAI,CAACY,IAAL,GAAc,EAAtC,CAA0C,CACxCF,UAAU,GACX,CAFD,IAEO,IAAIX,MAAM,GAAK,KAAX,EAAoBC,IAAI,CAACY,IAAL,GAAc,EAAtC,CAA0C,CAC/CC,UAAU,GACX,CAFM,IAEA,IAAId,MAAM,GAAK,KAAX,EAAoBC,IAAI,CAACY,IAAL,GAAc,IAAtC,CAA4C,CACjDG,UAAU,GACX,CACDZ,OAAO,KAAP,CACD,CATD,CAWA,GAAMgB,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC9BnB,OAAO,CAAC,SAACD,IAAD,wCAAgBA,IAAhB,MAAsBY,IAAI,CAAEQ,KAA5B,IAAD,CAAP,CAED,CAHD,CAIA,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,YAAK,SAAS,CAAC,aAAf,uBACE,iCACE,KAAC,SAAD,EAAW,OAAO,CAAEF,YAApB,EADF,EADF,EADF,cAWE,iBACE,QAAQ,CAAE,kBAACG,CAAD,CAAO,CACfF,YAAY,CAACE,CAAC,CAACC,MAAF,CAASF,KAAV,CAAZ,CACD,CAHH,CAIE,KAAK,CAAEpB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEY,IAJf,EAXF,GADF,CAoBD,CAxED,CA0EA,cAAed,SAAf"},"metadata":{},"sourceType":"module"}